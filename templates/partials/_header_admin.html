{#
    Header para el panel de administraciÃ³n
    Variables requeridas: nombre
#}

<header class="dashboard-header">
    <div class="header-left">
        <span class="logo">âš™ï¸</span> PANEL ADMINISTRADOR
        <span id="turnoActivoInfo" class="turno-activo-badge"></span>
    </div>
    <div class="header-right">
        <button class="btn-theme" onclick="toggleTheme()" title="Cambiar tema">
            <span id="theme-icon">ğŸŒ™</span>
        </button>
        <span class="usuario">ğŸ‘¤ {{ nombre }}</span>
        <a href="/dashboard" class="btn-admin" style="background: var(--info);">ğŸ“Š Dashboard</a>
        <a href="/logout" class="logout">Salir</a>
    </div>
</header>

<script>
// Cargar turno activo al iniciar
document.addEventListener('DOMContentLoaded', function() {
    cargarTurnoActivo();
    setInterval(cargarTurnoActivo, 30000); // Actualizar cada 30s
});

async function cargarTurnoActivo() {
    try {
        const response = await fetch('/admin/turno_activo');
        const data = await response.json();
        const elem = document.getElementById('turnoActivoInfo');

        if (data.ok && data.turno) {
            elem.innerHTML = `<span class="badge-turno-activo">ğŸŸ¢ Turno: ${data.turno.trabajador}</span>`;
            elem.title = `Inicio: ${data.turno.fecha_inicio}`;
        } else {
            elem.innerHTML = '<span class="badge-turno-inactivo">ğŸ”´ Sin turno activo</span>';
        }
    } catch (e) {
        console.error('Error cargando turno activo:', e);
    }
}
</script>
